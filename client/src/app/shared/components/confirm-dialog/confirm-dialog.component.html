@if (confirmService.options(); as options) {
<div
    class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 animate-fade-in"
    (click)="onBackdropClick($event)"
    tabindex="-1"
    role="dialog"
    (keydown.esc)="cancel()">
    <div class="bg-bg-secondary border border-accent-primary/20 rounded-xl shadow-[0_0_30px_rgba(56,189,248,0.15)] p-6 max-w-md w-full mx-4 flex flex-col gap-4 animate-scale-in">
      <h3 class="text-lg font-bold text-text-primary m-0">{{ options.title }}</h3>
      <p class="text-text-muted text-[0.9rem] m-0">{{ options.message }}</p>
      @if (requiresTypedText(); as requiredText) {
      <div class="flex flex-col gap-2">
        <label class="text-[0.8rem] text-text-muted" for="confirm-typed-input">
          Type <span class="font-semibold text-text-primary">{{ requiredText }}</span> to confirm.
        </label>
        <input
          id="confirm-typed-input"
          type="text"
          [value]="typedConfirmation()"
          (input)="onTypedConfirmationChange($event)"
          class="w-full rounded-lg border border-white/20 bg-glass-bg px-3 py-2 text-sm text-text-primary outline-none focus:border-accent-primary/60"
          autocomplete="off"
          spellcheck="false"
        />
      </div>
      }
      <div class="flex gap-3 justify-end mt-2">
        <app-button variant="secondary" (click)="cancel()">
          {{ options.cancelText || 'Cancel' }}
        </app-button>
        <app-button [variant]="options.variant || 'danger'" [disabled]="!canConfirm()" (click)="confirm()">
          {{ options.confirmText || 'Confirm' }}
        </app-button>
      </div>
    </div>
  </div>
}
